# Парсер из кинопоиска для DLE
Автоматический бот-парсер фильмов для сайтов на DLE из api kinopoisk.cloud

Скачать зависимости ```pip install -r requirements.txt```  
Так же для работы нужен браузер firefox и geckodriver, данный драйвер уже есть, 
он лежит в корне парсера и работает с firefox 75.0  

## Конфигурация бота  
**Для работы парсера необходимо заполнить файл *config.py*:**  

API_TOKEN - это токен из [api кинопоиска](https://kinopoisk.cloud/ "апи кинопоиска") получить его можно бесплатно.  
BOT_TOKEN - необходим токен вашего бота в телеграме. Создать бота можно в *@BotFather*  

**Для того чтобы постинг работал, необходимо указать данные для авторизации на сайте:**  
URL_DLE_SITES: http://site.online (без слеша в конце)  
DLE_LOGIN: логин пользователя с доступом к публикациям на сайте  
DLE_PASSWORD: пароль от этого аккаунта  

## Настройка сайта  
Чтобы бот знал что ему заполнять, нужно немного настроить ваш сайт, добавив туда категории и дополнительные поля

**Категории которые проставляет парсер:**  
Так как бот работает по api кинопоиска, он умеет проставлять следующие категории:

| Категории |
|---------|
| Документальный |
| Драма |  
| Комедия |  
| Мультфильм |  
| Музыка |  
| Короткометражка |  
| Фэнтези |  
| Детектив |  
| Мелодрама |  
| Триллер |  
| Семейный |  
| Биография |  
| Ужасы |  
| Криминал |  
| Боевик |  
| Фантастика |  
| Детский |  
| Спорт |  
| Приключения |  
| Аниме |  
| История |  
| Военный |  
| Вестерн |  
| Реальное ТВ|  
| Мюзикл |  
| Для взрослых |  
| Фильм-нуар |  
| Новости |  
| Концерт |  
| Игра |  
| Ток - шоу |  
| Церемония |  
| Фильмы |  
| Сериалы |  
| 2020 год |  
| 2019 год |  
| 2018 год |  
| 2017 год |  
| 2016 год |  
| 2015 год |

**Дополнительные поля**  
Бот выполняет поиск по доп. полям и заполняет данные, доп. поля вашего сайта хранятся в файле engine/data/xfields.txt
Нужно добавить с этот файл следующий текст:
````
name_foreign|Международное название||text||1|0|0|0|||0|0|||||||||
slogan|Слоган||text||1|0|0|0|||0|0|||||||||
time|Продолжительность||text||1|0|0|0|||0|0|||||||||
actors|Актеры||text||1|0|0|0|||0|0|||||||||
director|Режисер||text||1|0|0|0|||0|0|||||||||
studio|Киностудии||text||1|0|0|0|||0|0|||||||||
country|Страны||text||1|1|0|0|||0|0||||||||||
genre|Жанры||text||1|0|0|0|||0|0|||||||||
movie_type|Тип||text||1|0|0|0|||0|0|||||||||
age|Возрастная группа||text||1|0|0|0|||0|0|||||||||
poster|Постер||text||1|0|0|0|||0|0|||||||||
thumbnail|Миниатюра||text||1|0|0|0|||0|0|||||||||
screen|Скриншоты||text||1|1|0|0|||0|0|||||||||
year|Год||text||1|1|0|0|||0|0||||||||||
budget|Бюджет||text||1|0|0|0|||0|0|||||||||
kinopoisk_id|ID Кинопосика||text||1|0|0|0|||0|0|||||||||
imdb_id|ID IMDB||text||1|0|0|0|||0|0|||||||||
rating|Рейтинг Кинопоиск||text||1|0|0|0|||0|0|||||||||
rating_num|Голоса Кинопоиск||text||1|0|0|0|||0|0|||||||||
imdb|Рейтинг IMDB||text||1|0|0|0|||0|0|||||||||
imdb_num|Голоса IMDB||text||1|0|0|0|||0|0|||||||||
youtube_iframe|Трейлер||text||1|0|0|0|||0|0|||||||||
kodik_source|Качество Кодик||text||1|0|0|0|||0|0|||||||||
hdvb_source|Качество hdvb||text||1|0|0|0|||0|0|||||||||
collaps_source|Качество collaps||text||1|0|0|0|||0|0|||||||||
kodik_iframe|Видео Кодик||text||1|0|0|0|||0|0|||||||||
collaps_iframe|Видео collaps||text||1|0|0|0|||0|0|||||||||
hdvb_iframe|Видео hdvb||text||1|0|0|0|||0|0|||||||||
kodik_translator|Перевод Кодик||text||1|0|0|0|||0|0|||||||||
hdvb_translator|Перевод collaps||text||1|0|0|0|||0|0|||||||||
collaps_translator_first|Перевод hdvb||text||1|0|0|0|||0|0|||||||||
trivia|Факты||text||1|0|0|0|||0|0|||||||||
poster_alt|Обложка||text||1|0|0|0|||0|0|||||||||
series|Количество серий||text||1|0|0|0|||0|0|||||||||
season|Количество сезонов||text||1|0|0|0|||0|0|||||||||
viewers_who_have_reached|Зрителям которые достигли:||text||1|0|0|0|||0|0|||||||||
premiere_russia|Премьера в России||text||1|0|0|0|||0|0|||||||||
premiere_world|Премьера в мире||text||1|0|0|0|||0|0|||||||||
audience|Аудитория||text||1|0|0|0|||0|0|||||||||
fees_in_russia|Сборы в России||text||1|0|0|0|||0|0|||||||||
film_editor|Монтаж||text||1|0|0|0|||0|0|||||||||
painter|Художник||text||1|0|0|0|||0|0|||||||||
composer|Композитор||text||1|0|0|0|||0|0|||||||||
operator|Оператор||text||1|0|0|0|||0|0|||||||||
producer|Продюсер||text||1|0|0|0|||0|0|||||||||
screenwriters|Сценаристы||text||1|0|0|0|||0|0|||||||||
fees_in_world|Сборы в мире||text||1|0|0|0|||0|0|||||||||

